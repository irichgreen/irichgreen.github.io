<!DOCTYPE html>
<html>
<head>
  <title>Slidify</title>
  <meta charset="utf-8">
  <meta name="description" content="Slidify">
  <meta name="author" content="Jin-Hoon An (Apr. 26, 2015)">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Slidify</h1>
    <h2>Developing Data Products Project Assignments 2</h2>
    <p>Jin-Hoon An (Apr. 26, 2015)<br/></p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <article data-timings="">
    <style>
p {
  text-align: justify;
}
body {
 background-image: url(libraries/frameworks/minimal/images/light_wool.png)
}
</style>

<h2>Interactive Visualizations with rCharts and Shiny</h2>

<p>In this project, I will take you through the details of creating an interactive visualization using <code>rCharts</code> and <code>Shiny</code> packages. </p>

<ul>
<li>First Steps</li>
</ul>

<p>My first objective is to recreate the charts here without any menu controls. Once we are able to achieve that, we can add the menu controls easily using Shiny and convert it into an interactive app. This blog post will attemp to show you both how to use rCharts to create such visualizations, as well as how to convert them into an interactive app using Shiny.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Data</h2>
  </hgroup>
  <article data-timings="">
    <p>The data was collected by the International Labor Organization. I used a version of the dataset put together by the excellent data visualization blog: <a href="http://thewhyaxis.info/gap-remake/">thewhyaxis</a>. </p>

<pre><code>         country countrycode year id gender value
1           OECD        OECD 1995  1    Men   9.4
3        Austria         AUT 1995  3    Men   9.5
4        Belgium         BEL 1995  4    Men  12.2
5         Canada         CAN 1995  5    Men  13.2
7 Czech Republic         CZE 1995  7    Men   8.0
8        Denmark         DNK 1995  8    Men   9.6
</code></pre>

<ul>
<li>Creating an interactive visualization</li>
</ul>

<pre><code class="r">require(devtools)
install_github(&#39;ramnathv/rCharts&#39;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Bar Plot Process</h2>
  </hgroup>
  <article data-timings="">
    <p>Now recreate the bar plot shown in the visualization.</p>

<div id='chart1'></div>

<pre><code class="r">require(rCharts)
YEAR = 2011

men   &lt;- subset(dat2m, gender == &quot;Men&quot; &amp; year == YEAR)
women &lt;- subset(dat2m, gender == &quot;Women&quot; &amp; year == YEAR)
p1 &lt;- rPlot(x = list(var = &quot;countrycode&quot;, sort = &quot;value&quot;), y = &quot;value&quot;, 
  color = &#39;gender&#39;, data = women, type = &#39;bar&#39;)
p1$layer(x = &quot;countrycode&quot;, y = &quot;value&quot;, color = &#39;gender&#39;, 
  data = men, type = &#39;point&#39;, size = list(const = 3))

p1$guides(x = list(title = &quot;&quot;, ticks = unique(men$countrycode)))
p1$guides(y = list(title = &quot;&quot;, max = 18))
p1$addParams(width = 900, height = 800, dom = &#39;chart1&#39;,
  title = &quot;% of Employed who are Senior Managers&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Bar Plot</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">p1
</code></pre>

<p><iframe src=' assets/fig/chart1_1-1.html ' scrolling='no' frameBorder='0' seamless class='rChart polycharts ' id=iframe- chart1 ></iframe> <style>iframe.rChart{ width: 100%; height: 400px;}</style></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Bar Plot Description</h2>
  </hgroup>
  <article data-timings="">
    <p>The first step is to create subsets of the data by gender for a specific year. We then proceed to initialize a bar plot for <code>women</code>. The function <code>rPlot</code> uses an interface very similar to the <code>lattice</code> package. The first argument specifies that the x variable is going to be <code>countrycode</code> and we want it sorted by <code>value</code>. The remaining arguments specify different aesthetics of the bar plot.</p>

<p>The next step adds a second layer to this plot using the data for <code>men</code>, specifying that the values be displayed as <code>points</code>. The code in <strong>Step 3</strong> might seem a little strange to some of you, since there is no explicit assignment involved. The reason for this is that <code>rCharts</code> uses <a href="">Reference Classes</a>, which allow object oriented programming in R, leading to more concise code. In essence, <code>layer2</code> is a method of the object <code>p1</code> that adds a layer to the plot object. </p>

<p>The last few steps tweak the axis labels, width and height of the plot, before attaching it to a specific DOM element. At this point, you can run Steps 1 through 5 and type <code>p1</code> in your R console, and if everything goes right, you will be staring at the same plot created here.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Line Chart</h2>
  </hgroup>
  <article data-timings="">
    <p>We can now add a line chart for comparing the values for a specific country across years. We follow the same approach outlined above, except that we only need a single layer in this case.</p>

<div id='chart2'></div>

<pre><code class="r">COUNTRY = &quot;Korea&quot;
country = subset(dat2m, country == COUNTRY)
p2 &lt;- rPlot(value ~ year, color = &#39;gender&#39;, type = &#39;line&#39;, data = country)
p2$addParams(width = 900, height = 800, dom = &#39;chart2&#39;)
p2$guides(y = list(min = 0, title = &quot;&quot;))
p2
</code></pre>

<p><iframe src=' assets/fig/chart2-1.html ' scrolling='no' frameBorder='0' seamless class='rChart polycharts ' id=iframe- chart2 ></iframe> <style>iframe.rChart{ width: 100%; height: 400px;}</style></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>User Interface (ui.R)</h2>
  </hgroup>
  <article data-timings="">
    <p>Let us design the user interface first. Note that we need four components, two select boxes to allow the user to select the year and country, and two <code>div</code> tags to place the dynamically generated chart output.</p>

<p>Although the above code is self explanatory, I want to draw your attention to a couple of things. First, we choose a layout where the controls are placed in a sidebar and the charts in the main panel. Second, we generate the choices for the two selection boxes using the unique values for <code>year</code> and <code>country</code> in the dataset. Third, <code>showOutput</code> is a function in <code>rCharts</code> that creates placeholders for the generated charts, with a given id.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Chart Output (server.R)</h2>
  </hgroup>
  <article data-timings="">
    <p>Now that we nailed the UI, we need to tweak the plotting code to interface with the UI. To achieve this, we need to do three things. First, we need to replace COUNTRY and YEAR by <code>input$country</code> and <code>input$year</code> so that their values are dynamically obtained from user input. Second, we need to wrap the plotting calls inside <code>renderChart</code>, which is a function in <code>rCharts</code> that adds allows the plots to react to user inputs. Third, we need to assign the output of these calls to their respective elements in the UI (chart1 and chart2).</p>

<p>Finally, we place the code required to read and process the data in <code>global.R</code> so that the data is accessible to both <code>ui.R</code> and <code>server.R</code>. You can see the resulting <a href="https://anvaksa.shinyapps.io/MyProject">Shiny app here</a> and the <a href="https://github.com/irichgreen/Developing-Data-Products/MyProject">source code</a> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title=''>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Data'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Bar Plot Process'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Bar Plot'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Bar Plot Description'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Line Chart'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='User Interface (ui.R)'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Chart Output (server.R)'>
         8
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>